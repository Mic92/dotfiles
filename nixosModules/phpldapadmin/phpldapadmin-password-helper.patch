From 22b65777afc7eaeaa608c57d856e01c8180e94e2 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?J=C3=B6rg=20Thalheim?= <joerg@thalheim.io>
Date: Sat, 1 Nov 2025 10:15:39 +0100
Subject: [PATCH] Add template support for password hash helper
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Allow templates to specify a default password hash algorithm via the
'helper' attribute. When set, new password fields will default to
this hash type instead of CLEAR.

Example template usage:
{
  "attributes": {
    "userPassword": {
      "display": "Password",
      "helper": "ARGON2ID",
      "order": 1
    }
  }
}

Signed-off-by: JÃ¶rg Thalheim <joerg@thalheim.io>
---
 resources/views/components/attribute/value/password.blade.php | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/resources/views/components/attribute/value/password.blade.php b/resources/views/components/attribute/value/password.blade.php
index c401fe0..bca7775 100644
--- a/resources/views/components/attribute/value/password.blade.php
+++ b/resources/views/components/attribute/value/password.blade.php
@@ -10,7 +10,7 @@
 	<x-select class="mb-1"
 		id="userpassword_hash_{{$index}}_{{ $template?->name }}"
 		name="{{ $o->name_lc }}[{{ $attrtag }}{{ Entry::TAG_HELPER }}][]"
-		:value="old($o->name_lc.'.'.$attrtag.Entry::TAG_HELPER.'.'.$index,$o->hash($o->values->dot()->get($dotkey) ?: '')->id())"
+		:value="old($o->name_lc.'.'.$attrtag.Entry::TAG_HELPER.'.'.$index,$template?->attribute($o->name_lc)?->get('helper') ?: $o->hash($o->values->dot()->get($dotkey) ?: '')->id())"
 		:options="$helpers"
 		allowclear="false"
 		:disabled="! $edit"/>
-- 
2.51.0

